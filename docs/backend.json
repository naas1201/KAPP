
{
  "entities": {
    "Patient": {
      "title": "Patient",
      "type": "object",
      "description": "Represents a patient in the Castillo Health & Aesthetics system.",
      "properties": {
        "firstName": {
          "type": "string",
          "description": "Patient's first name."
        },
        "lastName": {
          "type": "string",
          "description": "Patient's last name."
        },
        "dateOfBirth": {
          "type": "string",
          "description": "Patient's date of birth.",
          "format": "date"
        },
        "email": {
          "type": "string",
          "description": "Patient's email address.",
          "format": "email"
        },
        "phone": {
          "type": "string",
          "description": "Patient's phone number."
        },
        "address": {
          "type": "string",
          "description": "Patient's address."
        },
        "medicalHistory": {
          "type": "string",
          "description": "Summary of the patient's medical history."
        },
        "aestheticGoals": {
          "type": "string",
          "description": "Patient's aesthetic goals."
        },
        "relatedPatientIds": {
          "type": "array",
          "description": "References to other related patients (e.g., family members). (Relationship: Patient N:N Patient)",
          "items": {
            "type": "string"
          }
        },
        "appointmentCount": {
            "type": "number",
            "description": "Total number of appointments for this patient."
        }
      },
      "required": [
        "firstName",
        "lastName",
        "dateOfBirth",
        "email",
        "phone"
      ]
    },
    "Appointment": {
      "title": "Appointment",
      "type": "object",
      "description": "Represents an appointment booking.",
      "properties": {
        "patientId": {
          "type": "string",
          "description": "Reference to Patient. (Relationship: Patient 1:N Appointment)"
        },
        "doctorId": {
          "type": "string",
          "description": "Reference to Doctor. (Relationship: Doctor 1:N Appointment)"
        },
        "serviceType": {
          "type": "string",
          "description": "Type of service for the appointment (e.g., General Medicine, Aesthetic Treatment)."
        },
        "dateTime": {
          "type": "string",
          "description": "Date and time of the appointment.",
          "format": "date-time"
        },
        "status": {
          "type": "string",
          "description": "Status of the appointment (e.g., pending, confirmed, cancelled).",
          "enum": ["pending", "confirmed", "cancelled"]
        },
        "notes": {
          "type": "string",
          "description": "Any notes related to the appointment."
        }
      },
      "required": [
        "patientId",
        "doctorId",
        "serviceType",
        "dateTime",
        "status"
      ]
    },
    "TreatmentRecord": {
      "title": "TreatmentRecord",
      "type": "object",
      "description": "Represents a treatment record for a patient.",
      "properties": {
        "patientId": {
          "type": "string",
          "description": "Reference to Patient. (Relationship: Patient 1:N TreatmentRecord)"
        },
        "doctorId": {
          "type": "string",
          "description": "Reference to Doctor. (Relationship: Doctor 1:N TreatmentRecord)"
        },
        "treatmentType": {
          "type": "string",
          "description": "Type of treatment (e.g., Botox, Consultation)."
        },
        "date": {
          "type": "string",
          "description": "Date of the treatment.",
          "format": "date"
        },
        "details": {
          "type": "string",
          "description": "Details of the treatment performed."
        },
        "prescriptionIds": {
          "type": "array",
          "description": "References to prescriptions associated with the treatment. (Relationship: TreatmentRecord 1:N Prescription)",
          "items": {
            "type": "string"
          }
        }
      },
      "required": [
        "patientId",
        "doctorId",
        "treatmentType",
        "date"
      ]
    },
    "Doctor": {
      "title": "Doctor",
      "type": "object",
      "description": "Represents a doctor in the system.",
      "properties": {
        "firstName": {
          "type": "string",
          "description": "Doctor's first name."
        },
        "lastName": {
          "type": "string",
          "description": "Doctor's last name."
        },
        "specialization": {
          "type": "string",
          "description": "Doctor's specialization."
        },
        "email": {
          "type": "string",
          "description": "Doctor's email address.",
          "format": "email"
        }
      },
      "required": [
        "firstName",
        "lastName",
        "specialization",
        "email"
      ]
    },
    "Prescription": {
      "title": "Prescription",
      "type": "object",
      "description": "Represents a prescription.",
      "properties": {
        "doctorId": {
          "type": "string",
          "description": "Reference to Doctor. (Relationship: Doctor 1:N Prescription)"
        },
        "patientId": {
          "type": "string",
          "description": "Reference to Patient. (Relationship: Patient 1:N Prescription)"
        },
        "drugName": {
          "type": "string",
          "description": "Name of the prescribed drug."
        },
        "dosage": {
          "type": "string",
          "description": "Dosage of the drug."
        },
        "frequency": {
          "type": "string",
          "description": "Frequency of the drug intake."
        },
        "notes": {
          "type": "string",
          "description": "Additional notes on the prescription."
        }
      },
      "required": [
        "doctorId",
        "patientId",
        "drugName",
        "dosage",
        "frequency"
      ]
    },
    "Lead": {
      "title": "Lead",
      "type": "object",
      "description": "Represents a lead captured through the lead capture form.",
      "properties": {
        "firstName": {
          "type": "string",
          "description": "Lead's first name."
        },
        "lastName": {
          "type": "string",
          "description": "Lead's last name."
        },
        "email": {
          "type": "string",
          "description": "Lead's email address.",
          "format": "email"
        },
        "phone": {
          "type": "string",
          "description": "Lead's phone number."
        },
        "source": {
          "type": "string",
          "description": "Source of the lead (e.g., Website, Messenger)."
        },
        "patientId": {
          "type": "string",
          "description": "Reference to Patient, if the lead converted. (Relationship: Lead 1:1 Patient)"
        }
      },
      "required": [
        "firstName",
        "lastName",
        "email",
        "phone",
        "source"
      ]
    },
    "FAQ": {
      "title": "FAQ",
      "type": "object",
      "description": "Represents a frequently asked question for a specific treatment.",
      "properties": {
        "treatmentName": {
          "type": "string",
          "description": "Name of the treatment the FAQ is related to."
        },
        "question": {
          "type": "string",
          "description": "The question asked."
        },
        "answer": {
          "type": "string",
          "description": "The answer to the question."
        }
      },
      "required": [
        "treatmentName",
        "question",
        "answer"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "google.com"
    ]
  },
  "firestore": {
    "collections": [
      {
        "path": "/patients/{patientId}",
        "schema": {
          "$ref": "#/entities/Patient"
        },
        "description": "Stores patient profiles. The document ID is the patient's auth UID."
      },
      {
        "path": "/patients/{patientId}/appointments/{appointmentId}",
        "schema": {
          "$ref": "#/entities/Appointment"
        },
        "description": "Subcollection for a patient's appointments."
      },
      {
        "path": "/patients/{patientId}/treatmentRecords/{recordId}",
        "schema": {
          "$ref": "#/entities/TreatmentRecord"
        },
        "description": "Subcollection for a patient's treatment history."
      },
      {
        "path": "/patients/{patientId}/prescriptions/{prescriptionId}",
        "schema": {
          "$ref": "#/entities/Prescription"
        },
        "description": "Subcollection for a patient's prescriptions."
      },
      {
        "path": "/doctors/{doctorId}",
        "schema": {
          "$ref": "#/entities/Doctor"
        },
        "description": "Stores doctor profiles. The document ID is the doctor's auth UID."
      },
      {
        "path": "/doctors/{doctorId}/authorizedPatients/{patientId}",
        "schema": {},
        "description": "An empty document here acts as an ACL entry, granting the doctor (identified by doctorId) access to the patient (identified by patientId). This allows for efficient security rule checks without reading patient documents."
      },
      {
        "path": "/leads/{leadId}",
        "schema": {
          "$ref": "#/entities/Lead"
        },
        "description": "Stores leads from contact forms. Accessible by staff roles."
      },
      {
        "path": "/faqs/{faqId}",
        "schema": {
          "$ref": "#/entities/FAQ"
        },
        "description": "Stores frequently asked questions. Publicly readable."
      }
    ]
  }
}
